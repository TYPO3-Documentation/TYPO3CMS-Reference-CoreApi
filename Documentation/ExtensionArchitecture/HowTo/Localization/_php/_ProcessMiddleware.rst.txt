.. Generated by https://github.com/TYPO3-Documentation/t3docs-codesnippets 
.. Extracted from T3docs\Examples\Middleware\HaikuSeasonList

.. code-block:: php
   :caption: Class T3docs\\Examples\\Middleware\\HaikuSeasonList

   use Psr\Http\Message\ResponseInterface;
   use Psr\Http\Message\ServerRequestInterface;
   use Psr\Http\Server\RequestHandlerInterface;
   
   final class HaikuSeasonList implements MiddlewareInterface
   {
       private const URL_SEGMENT = '/haiku-season-list.json';
   
       public function process(ServerRequestInterface $request, RequestHandlerInterface $handler): ResponseInterface
       {
           if (!str_contains($request->getUri()->getPath(), self::URL_SEGMENT)) {
               return $handler->handle($request);
           }
   
           $seasons = json_encode($this->getSeasons($request), JSON_THROW_ON_ERROR);
   
           return $this->responseFactory->createResponse()
               ->withHeader('Content-Type', 'application/json')
               ->withBody($this->streamFactory->createStream($seasons));
       }
   }
   